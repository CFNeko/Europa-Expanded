declarewar = {
	condition = {
		tooltip = CANNOT_DECLARE_WAR_ON_OVERLORD_ALLY
		potential = {
			OR = {
				is_subject_of_type = protectorate
				is_subject_of_type = sister_republic
			}
		}
		allow = {
			overlord = {
				NOT = { alliance_with = FROM }
				NOT = { has_guaranteed = FROM }
			}
		}
	}
	condition = {
		tooltip = CANNOT_DECLARE_WAR_ON_SISTER_REPUBLIC_ALLY
		potential = {
			any_subject_country = {
				is_subject_of_type = sister_republic
				OR = {
					alliance_with = FROM
					has_guaranteed = FROM
				}
			}
		}
		allow = {
			always = no
		}
	}
	condition = {
		tooltip = CANNOT_DECLARE_WAR_ON_NEIGHBOR_PUPPET_STATE_OF_RIVAL_WITHOUT_CORE_CLAIM
		potential = {
			FROM = {
				is_subject_of_type = puppet_state
				is_neighbor_of = ROOT
				overlord = {
					NOT = { is_neighbor_of = ROOT }
					is_neighbor_of = FROM
					OR = {
						is_rival = ROOT
						is_enemy = ROOT
					}
				}
			}
		}
		allow = {
			FROM = {
				any_owned_province = {
					is_core = ROOT
					any_neighbor_province = {
						owned_by = ROOT
						is_core = ROOT
					}
				}
			}
		}
	}
	condition = {
		tooltip = CANNOT_DECLARE_WAR_ON_NON_PRIMITIVE_NON_INTEGRATED_TRIBE
		potential = {
			is_subject_of_type = integrated_tribe_subject
		}
		allow = {
			is_neighbor_of = FROM
			FROM = {
				OR = {
					AND = {
						NOT = { is_subject_of_type = integrated_tribe_subject }
						primitives = yes
					}
					AND = {
						is_subject_of_type = integrated_tribe_subject
						overlord = {
							NOT = { overlord_of = ROOT }
						}
					}
				}
			}
		}
	}
	condition = {
		tooltip = CANNOT_DECLARE_WAR_ON_DUTCH_PROVINCE_OF_SAME_OVERLORD
		potential = {
			is_subject_of_type = dutch_province_subject
			has_global_flag = dutch_province_subject_no_internal_war
		}
		allow = {
			FROM = {
				OR = {
					NOT = { is_subject_of_type = dutch_province_subject }
					overlord = {
						NOT = { overlord_of = ROOT }
					}
				}
			}
		}
	}
	condition = {
		tooltip = CANNOT_DECLARE_WAR_WITHOUT_SCUTAGE_WHEN_DUTCH_PROVINCES_EXTERNAL_WAR_WAS_DISALLOWED
		potential = {
			is_subject_of_type = dutch_province_subject
		}
		allow = {
			OR = {
				NOT = { has_global_flag = dutch_province_subject_no_external_war }
				AND = {
					has_global_flag = dutch_province_subject_no_external_war
					has_scutage = yes
				}
				is_subject_of = FROM
			}
		}
	}
	condition = {
		tooltip = CANNOT_DECLARE_WAR_ON_OVERLORD_BEFORE_THIRD_DUTCH_PROVINCES_REFORM
		potential = {
			is_subject_of_type = dutch_province_subject
			is_subject_of = FROM
		}
		allow = {
			has_global_flag = dutch_province_subject_no_leader_election
		}
	}
	effect = {
		if = {
			limit = {
				FROM = {
					is_subject_of_type = protectorate
					overlord = {
						NOT = {
							is_in_war = {
								participants = ROOT
								participants = THIS
							}
						}
					}
				}
			}
			FROM = {
				country_event = { id = subjects_expanded_protectorate_events.3 days = 70 }
			}
		}
		if = {
			limit = {
				FROM = {
					has_country_flag = marked_for_war_by_@ROOT
				}
			}
			FROM = {
				clr_country_flag = marked_for_war_by_@ROOT
			}
		}
		if = {
			limit = {
				has_country_flag = marked_for_war_by_@FROM
			}
			clr_country_flag = marked_for_war_by_@FROM
		}
		
		# Needed for Extended Timeline
		if = {
			limit = {
				OR = {
					has_casus_belli = { type = cb_spread_communism target = FROM }
					has_casus_belli = { type = cb_spread_fascism target = FROM }
					has_casus_belli = { type = cb_spread_democracy target = FROM }
				}
			}
			set_country_flag = forcing_government
		}
	}
}

allianceaction = {
	condition = {
		tooltip = CANNOT_ALLY_OVERLORD_RIVAL
		potential = {
			is_subject_of_type = sister_republic
		}
		allow = {
			overlord = {
				is_rival = FROM
			}
		}
	}
	condition = {
		tooltip = CANNOT_ALLY_SISTER_REPUBLIC_RIVAL
		potential = {
			any_subject_country = {
				is_subject_of_type = sister_republic
				is_rival = FROM
			}
		}
		allow = {
			always = no
		}
	}
}

callaction = {
	condition = {
		tooltip = CANNOT_CALL_DUTCH_PROVINCE_AGAINST_ITS_OVERLORD
		potential = {
			FROM = {
				is_subject_of_type = dutch_province_subject
			}
		}
		allow = {
			FROM = {
				overlord = {
					NOT = { war_with = ROOT }
				}
			}
		}
	}
	condition = {
		tooltip = CANNOT_CALL_PERSIAN_SATRAPY_INTO_OFFENSIVE_WAR
		potential = {
			FROM = {
				is_subject_of = ROOT
				is_subject_of_type = persian_satrapy
			}
		}
		allow = {
			NOT = {
				is_in_war = {
					attacker_leader = ROOT
				}
			}
		}
	}
}